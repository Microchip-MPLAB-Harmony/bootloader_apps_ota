<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us" data-whc_version="24.1">
    <head><link rel="shortcut icon" href="oxygen-webhelp\template\resources/images/favicon.ico"/><link rel="icon" href="oxygen-webhelp\template\resources/images/favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="This example application shows how to use the OTA Bootloader Library to bootload an application on device having dual bank flash using RNBD. OTA Bootloader and Applications Block Diagram OTA ..."/><meta name="copyright" content="(C) Copyright 2024"/><meta name="generator" content="DITA-OT"/><title>1.1 OTA Bootloader - Dual Bank</title><!--  Generated with Oxygen version 24.1, build number 2022062014.  --><meta name="wh-path2root" content=""/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /D:\InfoShare\Data\Publish\Data\y3vbbn5hmbw\work\temp?&gt;&lt;?workdir-uri file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/temp/?&gt;&lt;?path2project?&gt;&lt;?path2project-uri ./?&gt;&lt;?path2rootmap-uri ./?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;ota-bootloader---dual-bank&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;topic:1;184:15&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;title:1;184:15&#34;&gt;OTA Bootloader - Dual Bank&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;body:1;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:1;184:15&#34;&gt;This example application shows how to use the OTA Bootloader Library to bootload an application on device having dual bank flash using RNBD.&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:2;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:1;184:15&#34;&gt;OTA Bootloader and Applications Block Diagram&lt;/b&gt;&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;GUID-DC597631-82E5-4D96-A854-E6617452D0C8-low.png&#34; placement=&#34;break&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;image:1;184:15&#34; dita-ot:image-width=&#34;756&#34; dita-ot:image-height=&#34;361&#34; dita-ot:horizontal-dpi=&#34;120&#34; dita-ot:vertical-dpi=&#34;120&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;alt:1;184:15&#34;&gt;ota_btl_block_dual_bank_diagram&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:3;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:2;184:15&#34;&gt;OTA Bootloader&lt;/b&gt;&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;ul:1;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:1;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:4;184:15&#34;&gt;This is a OTA bootloader which resides from&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;ul:2;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:2;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:5;184:15&#34;&gt;The starting location of the flash memory region for SAM devices&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:3;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:6;184:15&#34;&gt;The starting location of the Boot flash memory region for PIC32M devices&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;ul:3;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:4;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:7;184:15&#34;&gt;Uses a Custom linker script &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:3;184:15&#34;&gt;btl.ld&lt;/b&gt; to place it in Boot flash memory&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:8;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:4;184:15&#34;&gt;Performs Below Operation:&lt;/b&gt;&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;ol:1;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:5;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:9;184:15&#34;&gt;Read the &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:5;184:15&#34;&gt;control block&lt;/b&gt; stored in the last sector of dual bank memory&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:6;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:10;184:15&#34;&gt;Checks if &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:6;184:15&#34;&gt;blockUpdated&lt;/b&gt; field is set to 1, then it will update the control block&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;ul:4;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:7;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:11;184:15&#34;&gt;SAM devices - If &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:7;184:15&#34;&gt;blockUpdated&lt;/b&gt; field is set to 0 then it jumps to &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:8;184:15&#34;&gt;Step 4&lt;/b&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:8;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:12;184:15&#34;&gt;PIC32M devices - If &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:9;184:15&#34;&gt;blockUpdated&lt;/b&gt; field is set to 0 then map Program Flash Bank with higher serial number to the lower region and then it jumps to &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:10;184:15&#34;&gt;Step 4&lt;/b&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:9;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:13;184:15&#34;&gt;Set &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:11;184:15&#34;&gt;blockUpdated&lt;/b&gt; field to 0 and then update the &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:12;184:15&#34;&gt;control block&lt;/b&gt; in the dual bank flash memory. And perform the following operation.&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;ul:5;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:10;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:14;184:15&#34;&gt;SAM devices - Swap bank and trigger reset&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:11;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:15;184:15&#34;&gt;PIC32M devices - Trigger reset&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:12;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:16;184:15&#34;&gt;Run OTA application as below&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;ul:6;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:13;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:17;184:15&#34;&gt;Calls the SYS_Deinitialize() function which releases the resources used. &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:13;184:15&#34;&gt;This Function is device specific and has to be implemented based on application requirement&lt;/b&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:14;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:18;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:14;184:15&#34;&gt;Jumps to application space to run the OTA application&lt;/b&gt; &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:15;184:15&#34;&gt;OTA Application&lt;/b&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;ul:7;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:15;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:19;184:15&#34;&gt;This is a OTA application which resides from&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;ul:8;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:16;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:20;184:15&#34;&gt;The end of bootloader size in device flash memory for SAM devices&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:17;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:21;184:15&#34;&gt;The start of Program Flash memory for PIC32M devices&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;ul:9;184:15&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:18;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:22;184:15&#34;&gt;Uses a Custom linker script &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:16;184:15&#34;&gt;app_mz.ld&lt;/b&gt;/&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:17;184:15&#34;&gt;app_mk.ld&lt;/b&gt; to place it in Program flash memory&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:19;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:23;184:15&#34;&gt;It blinks an LED and provides console output&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:20;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:24;184:15&#34;&gt;It calls the OTA_SERVICE_Tasks() function which receives the binary over OTA to be programmed into the inactive flash bank&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:21;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:25;184:15&#34;&gt;Once the binary is received and programmed into the inactive flash bank, it generates a CRC32 value over programmed inactive flash bank space and verifies it against the received CRC32&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;li:22;184:15&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:26;184:15&#34;&gt;If verification is successful then it updates the &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:18;184:15&#34;&gt;control block&lt;/b&gt; and trigger reset to run new application binary through OTA bootloader&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;p:27;184:15&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md&#34; xtrc=&#34;b:19;184:15&#34;&gt;Development Kits&lt;/b&gt; The following table provides links to documentation on how to build and run OTA bootloader and application on different development kits&lt;/p&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; mapkeyref=&#34;GUID-F5088CDC-B029-4B8C-AB04-FFED75861AE6&#34; xtrc=&#34;topicref:2;6:245&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-F5088CDC-B029-4B8C-AB04-FFED75861AE6.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;GUID-D3602325-EE26-4349-B13C-9A4F4648DC3D.md&#34; mapclass=&#34;- map/topicref &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;6:99&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-F5088CDC-B029-4B8C-AB04-FFED75861AE6.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot gentext?&gt;MPLAB® Harmony 3 OTA Bootloader Application Examples&lt;/linktext&gt;&lt;/link&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:2;6:245&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-F5088CDC-B029-4B8C-AB04-FFED75861AE6.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;GUID-32E7C792-B846-4055-ACFF-5493AD1CF015.md&#34; mapclass=&#34;- map/topicref &#34; role=&#34;child&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:3;6:391&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-F5088CDC-B029-4B8C-AB04-FFED75861AE6.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot gentext?&gt;PIC32MK MCM Curiosity Pro Board: Building and Running the OTA Bootloader applications&lt;/linktext&gt;&lt;/link&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;GUID-F3ED85E5-AEE1-4FFE-BDC4-745C11F4731B.md&#34; mapclass=&#34;- map/topicref &#34; role=&#34;child&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:4;6:548&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-F5088CDC-B029-4B8C-AB04-FFED75861AE6.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot gentext?&gt;Curiosity PIC32MZ EF 2.0 Development Board: Building and Running the OTA Bootloader applications&lt;/linktext&gt;&lt;/link&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;GUID-AF4E5EA9-1680-4C2A-A355-7AB2E0ACC4C6.md&#34; mapclass=&#34;- map/topicref &#34; role=&#34;child&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:5;6:705&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-F5088CDC-B029-4B8C-AB04-FFED75861AE6.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot gentext?&gt;SAM E54 Curiosity Ultra Development Board: Building and Running the OTA Bootloader applications&lt;/linktext&gt;&lt;/link&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;GUID-6FA87DBD-BC1E-405A-9B05-9ADF83B20595.md&#34; mapclass=&#34;- map/topicref &#34; role=&#34;child&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:6;6:862&#34; xtrf=&#34;file:/D:/InfoShare/Data/Publish/Data/y3vbbn5hmbw/work/1/en-US/GUID-F5088CDC-B029-4B8C-AB04-FFED75861AE6.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot gentext?&gt;SAM E54 Xplained Pro Evaluation Kit: Building and Running the OTA Bootloader applications&lt;/linktext&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.md"/><meta name="wh-out-relpath" content="GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.html"/>
    <!-- Latest compiled and minified Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="./oxygen-webhelp/lib/bootstrap/css/bootstrap.min.css"/>
    
    <link rel="stylesheet" href="./oxygen-webhelp/lib/jquery-ui/jquery-ui.min.css"/>
    
    <!-- Template default styles  -->
    <link rel="stylesheet" type="text/css" href="./oxygen-webhelp/app/topic-page.css?buildId=2022062014"/>
    
    
    <script src="./oxygen-webhelp/lib/jquery/jquery-3.5.1.min.js"></script>
    
    <script data-main="./oxygen-webhelp/app/topic-page.js" src="./oxygen-webhelp/lib/requirejs/require.js"></script>
<link rel="stylesheet" type="text/css" href="oxygen-webhelp/template/microchip.css?buildId=2022062014"/><link rel="stylesheet" type="text/css" href="oxygen-webhelp/template/notes.css?buildId=2022062014"/>
<script src="mchp-context-help.js"></script>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async="" type="text/javascript"></script>
    <script src="https://assets.adobedtm.com/6a72a357eb48/a636c708c7fe/launch-0b0023397020.min.js"></script><!-- Adobe Analytics -->
</head>

    <body id="ota-bootloader---dual-bank" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            Jump to main content
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="index.html" class=" wh_logo d-none d-sm-block "><img src="oxygen-webhelp\template\resources/images/microchip.png" alt="MPLAB® Harmony Bootloader Application Examples for OTA "/></a>
                    <div class=" wh_publication_title "><a href="index.html">MPLAB® Harmony Bootloader Application Examples for OTA </a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        </div>
    </div>
</header>
        
        
         
        
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="search.html"><div class="d-flex justify-contents-around"><div class="flex-grow-1"></div><div class="position-relative flex-grow-1"><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required"/><button type="submit" class="wh_search_button" aria-label="Search"><span class="search_input_text">Search</span></button></div><div class="align-self-center flex-grow-1 ml-2"></div></div></form>
            
            <div class="mchp-color-stripe-grid-container">
  <div class="mchp-main-bar mchp-orange-bar"></div>
  <div class="mchp-main-bar mchp-blue-bar"></div>
  <div class="mchp-main-bar mchp-green-bar"></div>
</div>
            
        </div>
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="index.html"><span>Home</span></a></span></li><li><div class="topicref" data-id="mplab-harmony-3-ota-bootloader-application-examples"><div class="title"><a href="GUID-D3602325-EE26-4349-B13C-9A4F4648DC3D.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1</ph>
MPLAB® Harmony 3 OTA Bootloader Application Examples</a></div></div></li><li class="active"><div class="topicref" data-id="ota-bootloader---dual-bank"><div class="title"><a href="GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.html"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1</ph>
OTA Bootloader - Dual Bank</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="Collapse sections" title="Collapse sections"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem" aria-expanded="true"><div data-tocid="mplab-harmony-3-ota-bootloader-application-examples-d209e11" class="topicref" data-id="mplab-harmony-3-ota-bootloader-application-examples" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action mplab-harmony-3-ota-bootloader-application-examples-d209e11-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-D3602325-EE26-4349-B13C-9A4F4648DC3D.html" id="mplab-harmony-3-ota-bootloader-application-examples-d209e11-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1</ph>
MPLAB® Harmony 3 OTA Bootloader Application Examples</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="true" class="active"><div data-tocid="ota-bootloader---dual-bank-d209e19" class="topicref" data-id="ota-bootloader---dual-bank" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action ota-bootloader---dual-bank-d209e19-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-A82B7725-71FC-4D92-9B03-5FF66C2FAD9E.html" id="ota-bootloader---dual-bank-d209e19-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1</ph>
OTA Bootloader - Dual Bank</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="pic32mk-mcm-curiosity-pro-board-building-and-running-the-ota-bootloader-applications-d209e27" class="topicref" data-id="pic32mk-mcm-curiosity-pro-board-building-and-running-the-ota-bootloader-applications" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-32E7C792-B846-4055-ACFF-5493AD1CF015.html" id="pic32mk-mcm-curiosity-pro-board-building-and-running-the-ota-bootloader-applications-d209e27-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1.1</ph>
PIC32MK MCM Curiosity Pro Board: Building and Running the OTA Bootloader applications</a></div></div></li><li role="treeitem"><div data-tocid="curiosity-pic32mz-ef-20-development-board-building-and-running-the-ota-bootloader-applications-d209e35" class="topicref" data-id="curiosity-pic32mz-ef-20-development-board-building-and-running-the-ota-bootloader-applications" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-F3ED85E5-AEE1-4FFE-BDC4-745C11F4731B.html" id="curiosity-pic32mz-ef-20-development-board-building-and-running-the-ota-bootloader-applications-d209e35-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1.2</ph>
Curiosity PIC32MZ EF 2.0 Development Board: Building and Running the OTA Bootloader applications</a></div></div></li><li role="treeitem"><div data-tocid="sam-e54-curiosity-ultra-development-board-building-and-running-the-ota-bootloader-applications-d209e43" class="topicref" data-id="sam-e54-curiosity-ultra-development-board-building-and-running-the-ota-bootloader-applications" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-AF4E5EA9-1680-4C2A-A355-7AB2E0ACC4C6.html" id="sam-e54-curiosity-ultra-development-board-building-and-running-the-ota-bootloader-applications-d209e43-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1.3</ph>
SAM E54 Curiosity Ultra Development Board: Building and Running the OTA Bootloader applications</a></div></div></li><li role="treeitem"><div data-tocid="sam-e54-xplained-pro-evaluation-kit-building-and-running-the-ota-bootloader-applications-d209e51" class="topicref" data-id="sam-e54-xplained-pro-evaluation-kit-building-and-running-the-ota-bootloader-applications" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-6FA87DBD-BC1E-405A-9B05-9ADF83B20595.html" id="sam-e54-xplained-pro-evaluation-kit-building-and-running-the-ota-bootloader-applications-d209e51-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.1.4</ph>
SAM E54 Xplained Pro Evaluation Kit: Building and Running the OTA Bootloader applications</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="ota-bootloader---external-memory-d209e59" class="topicref" data-id="ota-bootloader---external-memory" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action ota-bootloader---external-memory-d209e59-link" class="wh-expand-btn"></span><div class="title"><a href="GUID-BDF2405C-B905-4252-AEB3-07922B1A4748.html" id="ota-bootloader---external-memory-d209e59-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.2</ph>
OTA Bootloader - External Memory</a></div></div></li><li role="treeitem"><div data-tocid="microchip-bluetooth-data-mbd-application-help-d209e91" class="topicref" data-id="microchip-bluetooth-data-mbd-application-help" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-B3F7BD29-9883-431D-B682-F405F22C1BE0.html" id="microchip-bluetooth-data-mbd-application-help-d209e91-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.3</ph>
Microchip Bluetooth Data (MBD) Application Help</a></div></div></li><li role="treeitem"><div data-tocid="ota-bootloader-host-script-help-d209e99" class="topicref" data-id="ota-bootloader-host-script-help" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="GUID-ECC16920-EE69-48DB-9B32-F774CEB2D079.html" id="ota-bootloader-host-script-help-d209e99-link"><ph xmlns="http://www.oxygenxml.com/ns/webhelp/toc">1.4</ph>
OTA Bootloader Host Script Help</a></div></div></li></ul></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-9 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        
                        <div class=" wh_topic_content body "><main role="main"><article role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1" style="">1.1 OTA Bootloader - Dual Bank</h1><div class="- topic/body body"><p class="- topic/p p">This example application shows how to use the OTA Bootloader Library to bootload an application on device having dual bank flash using RNBD.</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">OTA Bootloader and Applications Block Diagram</strong></p><div class=""><img class="- topic/image image break break" src="GUID-DC597631-82E5-4D96-A854-E6617452D0C8-low.png" alt="ota_btl_block_dual_bank_diagram"/></div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">OTA Bootloader</strong></p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">This is a OTA bootloader which resides from</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">The starting location of the flash memory region for SAM devices</p></li><li class="- topic/li li"><p class="- topic/p p">The starting location of the Boot flash memory region for PIC32M devices</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">Uses a Custom linker script <strong class="+ topic/ph hi-d/b ph b">btl.ld</strong> to place it in Boot flash memory</p></li></ul></li></ul></li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Performs Below Operation:</strong></p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">Read the <strong class="+ topic/ph hi-d/b ph b">control block</strong> stored in the last sector of dual bank memory</p></li><li class="- topic/li li"><p class="- topic/p p">Checks if <strong class="+ topic/ph hi-d/b ph b">blockUpdated</strong> field is set to 1, then it will update the control block</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">SAM devices - If <strong class="+ topic/ph hi-d/b ph b">blockUpdated</strong> field is set to 0 then it jumps to <strong class="+ topic/ph hi-d/b ph b">Step 4</strong></p></li><li class="- topic/li li"><p class="- topic/p p">PIC32M devices - If <strong class="+ topic/ph hi-d/b ph b">blockUpdated</strong> field is set to 0 then map Program Flash Bank with higher serial number to the lower region and then it jumps to <strong class="+ topic/ph hi-d/b ph b">Step 4</strong></p></li></ul></li><li class="- topic/li li"><p class="- topic/p p">Set <strong class="+ topic/ph hi-d/b ph b">blockUpdated</strong> field to 0 and then update the <strong class="+ topic/ph hi-d/b ph b">control block</strong> in the dual bank flash memory. And perform the following operation.</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">SAM devices - Swap bank and trigger reset</p></li><li class="- topic/li li"><p class="- topic/p p">PIC32M devices - Trigger reset</p></li></ul></li><li class="- topic/li li"><p class="- topic/p p">Run OTA application as below</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">Calls the SYS_Deinitialize() function which releases the resources used. <strong class="+ topic/ph hi-d/b ph b">This Function is device specific and has to be implemented based on application requirement</strong></p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Jumps to application space to run the OTA application</strong>
<strong class="+ topic/ph hi-d/b ph b">OTA Application</strong></p></li></ul></li></ol><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">This is a OTA application which resides from</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">The end of bootloader size in device flash memory for SAM devices</p></li><li class="- topic/li li"><p class="- topic/p p">The start of Program Flash memory for PIC32M devices</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">Uses a Custom linker script <strong class="+ topic/ph hi-d/b ph b">app_mz.ld</strong>/<strong class="+ topic/ph hi-d/b ph b">app_mk.ld</strong> to place it in Program flash memory</p></li></ul></li></ul></li><li class="- topic/li li"><p class="- topic/p p">It blinks an LED and provides console output</p></li><li class="- topic/li li"><p class="- topic/p p">It calls the OTA_SERVICE_Tasks() function which receives the binary over OTA to be programmed into the inactive flash bank</p></li><li class="- topic/li li"><p class="- topic/p p">Once the binary is received and programmed into the inactive flash bank, it generates a CRC32 value over programmed inactive flash bank space and verifies it against the received CRC32</p></li><li class="- topic/li li"><p class="- topic/p p">If verification is successful then it updates the <strong class="+ topic/ph hi-d/b ph b">control block</strong> and trigger reset to run new application binary through OTA bootloader</p></li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Development Kits</strong>
The following table provides links to documentation on how to build and run OTA bootloader and application on different development kits</p></div></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                </div>
            </div>
            
            
            
        </div> 
        <div class="mchp_disclaimer"><p class="mchp_disclaimer_text">The online versions of the documents are provided as a courtesy. Verify all content and data in the device’s PDF documentation found on the device product page.</p></div><footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
    <div class="footer">
  <div class="mchp-wh-footer">
    <div class="mchp-footer">
      <div class="mchp-footer-tier1">
        <div class="spacer"></div>
        <div class="mchp-footer-container">
          <div class="mchp-footer-links mchp-social-media-links">
            <div class="mchp-component-items">
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.facebook.com/pages/Microchip-Technology-Inc/20320981741" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Facebook" src="oxygen-webhelp/template/resources/images/201016-corp-facebook.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.linkedin.com/company/microchip-technology" target="_blank">
                  <img class="cmp-image__image" alt="Microchip LinkedIn" src="oxygen-webhelp/template/resources/images/201016-corp-linkedin.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://twitter.com/MicrochipTech" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Twitter" src="oxygen-webhelp/template/resources/images/201016-corp-twitter.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.youtube.com/user/MicrochipTechnology" target="_blank">
                  <img class="cmp-image__image" alt="Microchip YouTube" src="oxygen-webhelp/template/resources/images/201016-corp-youtube.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.instagram.com/microchiptechnologyinc/" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Instagram" src="oxygen-webhelp/template/resources/images/201016-corp-instagram.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.weibo.com/microchiptech" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Weibo" src="oxygen-webhelp/template/resources/images/201016-corp-weibo.png"/>
                </a>
              </div>
              <div class="mchp-component-item">
                <a class="cmp-image__link" href="https://www.microchip.com/en-us/about/blog" target="_blank">
                  <img class="cmp-image__image" alt="Microchip Blog" src="oxygen-webhelp/template/resources/images/201016-corp-blog.png"/>
                </a>
              </div>
            </div>
          </div>
          <div class="mchp-footer-links">
            <div class="mchp-component-items">
              <div class="mchp-component-item">
                <div class="link">
                  <a href="https://www.microchip.com/about-us/contact-us" class="mchp-link__link">Contact</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information" class="mchp-link__link">Legal</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information/privacy-policy" class="mchp-link__link">Privacy Policy</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item ">
                <div class="link">
                  <a href="https://www.microchip.com/en-us/about/legal-information/microchip-cookie-statement" class="mchp-link__link">Cookies</a>
                  <span class="mchp-link__separator">|</span>
                </div>
              </div>
              <div class="mchp-component-item">
                <div class="link">
                  <a href="https://careers.microchip.com/" class="mchp-link__link">Careers</a>
                  <span class="mchp-link__separator"></span>
                </div>
              </div>
            </div>
          </div>
          <div class="mchp-footer-newsletter">
            <div class="cmp-text">
              <p>Stay on the leading edge with our blog</p>
            </div>
            <div class="mchp-button-wrapper">
              <a role="button" href="https://www.microchip.com/en-us/about/blog" class="mchp-button mchp-button-regular solid">
                <span class="mchp-button__span">MicroSolutions</span>
              </a>
            </div>
          </div>
        </div>
        <div class="graphic">
          <img src="oxygen-webhelp/template/resources/images/footer-graphic.png"/>
        </div>
      </div>
      <div class="mchp-footer-tier2">
        <p class="mchp-copyright">© Copyright 1998-2022 Microchip Technology Inc. All rights reserved.</p>
      </div>
    </div>
  </div>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async="true" src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-19"></script>
  <script>
    window.dataLayer = window.dataLayer || [];  
    function gtag(){dataLayer.push(arguments);}  
    gtag('js', new Date());   
    gtag('config', 'UA-2724382-19');
  </script>
  
  <script type="text/javascript">_satellite.pageBottom();</script><!-- Adobe Analytics -->
  
</div>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
       
        </body>
</html>